
# ğŸ—ï¸ Arquitetura Frontend: Monorepo + Microfrontends + FSD + Clean Architecture

## ğŸ“Œ VisÃ£o Geral

Este projeto adota uma arquitetura moderna e escalÃ¡vel que combina:

- âœ… **Monorepo** (com Turborepo + pnpm Workspaces)
- âœ… **Microfrontends (MFE)** com **Module Federation (Vite)**
- âœ… **Feature Sliced Design (FSD)**
- âœ… **Clean Architecture**
- âœ… **Typescript + React + Vite + Jest**
- âœ… **CI/CD incremental com cache (Turbo + GitHub Actions)**

---

## ğŸ“‚ Estrutura de Pastas (Exemplo)

```
.
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ shell/                  # App container (host / shell)
â”‚   â”œâ”€â”€ mfe-user-profile/       # Microfrontend 1 (ex: Perfil do UsuÃ¡rio)
â”‚   â”œâ”€â”€ mfe-dashboard/          # Microfrontend 2 (ex: Dashboard)
â”‚   â””â”€â”€ mfe-reports/            # Microfrontend 3 (ex: RelatÃ³rios)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/                     # Design system: componentes compartilhados (Atomic Design)
â”‚   â”œâ”€â”€ domain/                 # Camada de DomÃ­nio (Entidades, Casos de Uso, etc)
â”‚   â”œâ”€â”€ utils/                  # Helpers reutilizÃ¡veis
â”‚   â”œâ”€â”€ http/                   # HTTP Client abstraÃ­do (ex: fetch, axios)
â”‚   â”œâ”€â”€ mocks/                  # ServiÃ§os mockados para testes/unitÃ¡rios e Storybook
â”‚   â””â”€â”€ config/                 # ConfiguraÃ§Ã£o compartilhada (eslint, tsconfig, vitest config, etc)
â”œâ”€â”€ turbo.json                  # Pipeline de build/test/lint
â”œâ”€â”€ pnpm-workspace.yaml         # Workspaces monorepo
â””â”€â”€ .github/workflows/          # CI/CD (build incremental, lint, test, deploy)
```

---

## âœ… BenefÃ­cios da Arquitetura

| Ãrea                         | BenefÃ­cio                                  |
|------------------------------|-------------------------------------------|
| **Escalabilidade**            | Suporte a mÃºltiplas equipes e domÃ­nios |
| **Build Performance**         | Turbo + Cache incremental por app/pacote |
| **ReutilizaÃ§Ã£o de cÃ³digo**    | Via `packages/` (libs compartilhadas)    |
| **IndependÃªncia de Deploy**   | Deploy de cada MFE separado (Module Federation) |
| **Testabilidade**             | LÃ³gica isolada (domain, useCases) sem dependÃªncia de UI |
| **PadronizaÃ§Ã£o de cÃ³digo**    | Configs centralizadas em `/packages/config` |

---

## âœ… Camadas por Projeto (FSD + Clean)

Cada Microfrontend (`apps/`) e cada pacote (`packages/`) segue **Feature Sliced Design** com inspiraÃ§Ã£o em **Clean Architecture**:

```
src/
â”œâ”€â”€ app/           # ConfiguraÃ§Ãµes de App (routes, providers, etc)
â”œâ”€â”€ pages/         # Rotas / Views
â”œâ”€â”€ features/      # Funcionalidades (Ex: Login, Cadastro)
â”œâ”€â”€ entities/      # Entidades de negÃ³cio
â”œâ”€â”€ shared/        # Componentes / Utils / API / UI comuns
â”œâ”€â”€ widgets/       # Componentes grandes (ex: Grids, Sidebars)
â””â”€â”€ processes/     # Fluxos maiores (Ex: CheckoutProcess)
```

No caso dos **packages/domain/**:

```
src/
â”œâ”€â”€ entities/        # Modelos de domÃ­nio
â”œâ”€â”€ useCases/        # Casos de Uso
â”œâ”€â”€ services/        # Interfaces de serviÃ§os (mockÃ¡veis)
â”œâ”€â”€ tests/           # Testes unitÃ¡rios focados na lÃ³gica
â””â”€â”€ errors/          # Classes de erros
```

---

## âœ… Exemplo de CI/CD com Turbo + GitHub Actions

```yaml
name: CI

on:
  push:
    branches: [main, develop]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: pnpm/action-setup@v2
      - run: pnpm install
      - run: pnpm turbo run build --filter=...
```

âœ… Suporte a cache de build + cache de node_modules + cache de lint/test por app.

---

## âœ… Tecnologias Envolvidas

| Camada                 | Tecnologia                 |
|------------------------|----------------------------|
| Monorepo               | Turborepo + pnpm Workspaces |
| Build                  | Vite + Module Federation |
| UI                     | React + Mantine + Atomic Design |
| LÃ³gica de NegÃ³cio      | Clean Architecture (packages/domain) |
| Design                 | FSD (Feature Sliced Design) |
| Testes                 | Jest |
| CI/CD                  | GitHub Actions + Turbo Cache |

---

## âœ… Quando usar esta Arquitetura?

âœ… Times grandes trabalhando em mÃºltiplas features ou domÃ­nios  
âœ… Projetos com roadmap de longo prazo  
âœ… Necessidade de build/deploy independentes por MFE  
âœ… Desejo de CI/CD rÃ¡pido com cache incremental  

---

## âœ… Changesets (Versionamento Automatizado por Pacote) no Monorepo com MFE

ğŸ“Œ Estrutura bÃ¡sica:
```
/apps
  mfe-dashboard/
  mfe-user-profile/

/packages
  ui/
  http/
  domain/
````

## âœ… Como o Changesets funciona nesse cenÃ¡rio:

âœ… O Changesets vai controlar a versÃ£o individual de cada pacote dentro de /packages, criando changelogs e bumps de versÃ£o automaticamente, baseado nas alteraÃ§Ãµes feitas.

âœ… Exemplo de fluxo de trabalho com Changesets:

---

## âœ… Exemplo de fluxo de trabalho com Changesets:
ğŸ‘‰ Exemplo inicial de versÃµes:
| Pacote          | VersÃ£o Atual |
| --------------- | ------------ |
| `@myorg/ui`     | `1.2.0`      |
| `@myorg/http`   | `2.1.0`      |
| `@myorg/domain` | `0.9.0`      |


âœ… Passo a passo:
1. Alterou algo no pacote ui/?
ğŸ‘‰ Rode o comando:
```
npx changeset

```

O Changesets vai te perguntar:

- Qual pacote foi alterado? â†’ (ex: @myorg/ui)

- Tipo de mudanÃ§a?

- patch (bugfix)

- minor (nova feature)

- major (breaking change)

- Mensagem de changelog?


---

2. O Changesets cria um arquivo YAML dentro de .changeset/ assim:
```
---
"@myorg/ui": minor
---

Add new Button component to UI lib

```