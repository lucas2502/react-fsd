
# ğŸ—ï¸ Arquitetura Frontend: SPA + Microfrontend + Monorepo + Turborepo + FSD + Changesets

## ğŸ“Œ VisÃ£o Geral da Arquitetura

Este projeto adota um modelo moderno de desenvolvimento frontend com foco em escalabilidade, autonomia entre times e performance de build.

---

## âœ… Stack TecnolÃ³gica

| Camada                          | Tecnologia/Ferramenta                          |
|--------------------------------|-----------------------------------------------|
| Build Tool                      | **Vite**                                       |
| Linguagem                       | **TypeScript**                                 |
| Framework UI                    | **React**                                      |
| Design System                   | **Mantine**                                    |
| Testes UnitÃ¡rios                | **Jest**                                       |
| Monorepo                        | **Turborepo + PNPM Workspaces**               |
| Microfrontend Loader            | **Module Federation (via vite-plugin-federation)** |
| Gerenciamento de VersÃ£o de Pacotes | **Changesets (versÃ£o interna, sem publish NPM)** |
| Estilo de Arquitetura Frontend  | **Feature Sliced Design (FSD)**               |

---

## âœ… Estrutura de Pastas (Simplificada)

```
.
â”œâ”€â”€ apps/                    # Microfrontends (MFE)
â”‚   â”œâ”€â”€ mfe-dashboard/
â”‚   â””â”€â”€ mfe-profile/
â”œâ”€â”€ packages/                # Pacotes globais compartilhados
â”‚   â”œâ”€â”€ ui/                  # Componentes UI reutilizÃ¡veis
â”‚   â”œâ”€â”€ http/                # Adapters HTTP (Axios, Fetch, etc)
â”‚   â”œâ”€â”€ domain/              # Casos de uso, services, lÃ³gica de domÃ­nio
â”‚   â””â”€â”€ utils/               # Helpers e funÃ§Ãµes utilitÃ¡rias
â”œâ”€â”€ .changeset/              # ConfiguraÃ§Ã£o e pending changes do Changesets
â”œâ”€â”€ turbo.json               # ConfiguraÃ§Ã£o Turborepo (cache, pipelines)
â”œâ”€â”€ pnpm-workspace.yaml      # ConfiguraÃ§Ã£o dos workspaces PNPM
â””â”€â”€ package.json             # Root do projeto
```

---

## âœ… OrganizaÃ§Ã£o por FSD (Feature Sliced Design) + Camadas DDD-like

Cada MFE segue a estrutura FSD:

```
src/
â”œâ”€â”€ app/                 # InicializaÃ§Ã£o, contextos globais
â”œâ”€â”€ entities/            # Modelos e entidades de domÃ­nio
â”œâ”€â”€ features/            # Blocos funcionais (Login, UserList, etc)
â”œâ”€â”€ shared/              # Componentes e libs reutilizÃ¡veis
â”œâ”€â”€ pages/               # Entry points por rota
â””â”€â”€ widgets/             # Componentes compostos por features
```

---

## âœ… Versionamento interno com Changesets (sem publish pÃºblico)

### ğŸ“Œ Como funciona:

- Cada pacote em `/packages` tem **sua prÃ³pria versÃ£o (1.0.0, 1.1.0, etc)**.
- Quando houver mudanÃ§a, o time roda:

```bash
npx changeset
```

- O Changesets vai gerar um arquivo de alteraÃ§Ã£o.
- O comando:

```bash
npx changeset version
```

Gera o bump automÃ¡tico de versÃ£o + changelog interno.

- As versÃµes sÃ£o consumidas via PNPM workspace:

```json
"@myorg/ui": "workspace:^1.2.0"
```

---

## âœ… Module Federation com Vite

Cada MFE serÃ¡ exposto como Remote Module.

Exemplo de configuraÃ§Ã£o (vite.config.ts):

```ts
import federation from '@originjs/vite-plugin-federation';

export default defineConfig({
  plugins: [
    federation({
      name: 'mfe-dashboard',
      remotes: {},
      exposes: {
        './UserList': './src/features/UserList/index.tsx',
      },
    }),
  ],
});
```

---

## âœ… CI/CD com Turborepo + Cache Inteligente

- Build incremental com cache de tarefas por pacote.
- Pipelines por MFE e por pacote.
- Cache inteligente baseado em `inputs`, `outputs` e versÃ£o do pacote.

Exemplo de step de cache no GitHub Actions:

```yaml
- name: Cache Turborepo
  uses: actions/cache@v3
  with:
    path: .turbo
    key: ${{ runner.os }}-turbo-${{ hashFiles('**/pnpm-lock.yaml') }}
```

---

## âœ… Resumo das DecisÃµes Arquiteturais

| DecisÃ£o | Motivo |
|--|--|
| Monorepo (Turborepo + PNPM Workspaces) | Melhor gerenciamento de pacotes, cache de build e compartilhamento |
| Microfrontend com Module Federation | Autonomia de deploy por MFE |
| FSD (Feature Sliced Design) | Melhor organizaÃ§Ã£o por feature |
| Changesets para versionamento interno | Rastreabilidade de mudanÃ§as por pacote sem necessidade de publicar no NPM |
| Vite + React + TS | Build rÃ¡pido + tipagem + experiÃªncia moderna de DX |

---

## âœ… PrÃ³ximos Passos Recomendados

âœ… Automatizar versÃ£o e changelogs no CI com Changesets  
âœ… Definir contratos de integraÃ§Ã£o entre MFEs via Typescript  
âœ… (Opcional) Adotar um NPM Registry privado no futuro, se quiser externalizar os packages  
